<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحة البيانات الشخصية</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>مرحبًا بك في صفحتك الشخصية</h1>
    </header>
    <main>
        <section>
            <h2>الصورة الشخصية</h2>
            <img src="" alt="صورتك الشخصية" id="profileImage">
        </section>
        <section>
            <h2>بياناتك الشخصية</h2>
            <p><strong>الاسم:</strong> <span id="name"></span></p>
            <p><strong>البريد الإلكتروني:</strong> <span id="email"></span></p>
            <p><strong>الجنسية:</strong> <span id="nationality"></span></p>
            <p><strong>المدينة:</strong> <span id="city"></span></p>
            <p><strong>عدد سنوات الخبرة:</strong> <span id="experience"></span></p>
        </section>
        <button id="editProfile">تعديل الصفحة الشخصية</button>
        <a href="edit_profile.html">تعديل الصفحة الشخصية</a>
    </main>
    <footer>
        <p>&copy; ٢٠٢٤ خدمات البناء</p>
    </footer>

    <!-- Firebase SDK Script Tags -->
    <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore.js"></script>
    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
    apiKey: "AIzaSyB7YJhtaefEPc9NMzhTBjQC06WmSEja0xc",
    authDomain: "omran-16f44.firebaseapp.com",
    databaseURL: "https://omran-16f44-default-rtdb.firebaseio.com",
    projectId: "omran-16f44",
    storageBucket: "omran-16f44.appspot.com",
    messagingSenderId: "598982209417",
    appId: "1:598982209417:web:dc9cbddd485a1ea52bbb58",
    measurementId: "G-PGZJ0T555G"
  };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        const auth = firebase.auth();
        const firestore = firebase.firestore();

        // Get current user
        const currentUser = auth.currentUser;

        // Function to display user profile data
        function displayProfileData(user) {
            document.getElementById('name').textContent = user.displayName || '';
            document.getElementById('email').textContent = user.email || '';
            document.getElementById('nationality').textContent = user.nationality || '';
            document.getElementById('city').textContent = user.city || '';
            document.getElementById('experience').textContent = user.experience || '';
        }

        // Display profile image if available
        if (currentUser.photoURL) {
            document.getElementById('profileImage').src = currentUser.photoURL;
        }

        // Fetch user profile data from Firestore based on UID
        firestore.collection('users').doc(currentUser.uid).get()
            .then((doc) => {
                if (doc.exists) {
                    const userData = doc.data();
                    displayProfileData(userData);
                } else {
                    console.log("No such document!");
                }
            })
            .catch((error) => {
                console.log("Error getting document:", error);
            });

        // Redirect to edit profile page when the button is clicked
        document.getElementById('editProfile').addEventListener('click', () => {
            window.location.href = 'edit_profile.html';
        });
    </script>
</body>
</html>
